function BaseModelObserver(){var e={interfaces:{},create:function(e,t){this.interfaces[e]=t},implement:function(e,t){return this.interfaces[e].implementation=t,this.interfaces[e].type=e,new Interface(this.interfaces[e])}},t=t||{};return t.handlerApi=function(){var t="handlers",n={},r={};return e.create(t,{initter:function(e,t,n,r,a){return e},getter:function(e,t){return e},setter:function(e,t,n){return e}}),this.define=function(a){var o=e.implement(t,a);for(var i in a)a.hasOwnProperty(i)&&(n.hasOwnProperty(i)||(n[i]=[]),Object.defineProperty(r,i,{get:function(){return n[i]},set:function(e){n[i].push(e)},enumerable:!0,configurable:!0}),r[i]=o[i])},this.runHandler=function(e){for(var t in n[e])n[e].hasOwnProperty(t)&&(arguments[1][0]=n[e][t].apply(this,arguments[1]));return arguments[1][0]},this},t.handler=new t.handlerApi,t.createModel=function(e,n,r){function a(e,t,n){var t=t||[];for(var r in e)t.push(r),o(e[r],e,r,t.slice(),n),"object"==typeof e[r]&&a(e[r],t,e),t.pop();return e}function o(e,n,r,a,o){e=t.handler.runHandler("initter",[e,n,r,a,o]),Object.defineProperty(n,r,{configurable:!0,get:function(){return t.handler.runHandler.bind(this)("getter",[e,a])},set:function(n){e=t.handler.runHandler.bind(this)("setter",[n,e,a])}})}var i=i||"root",c={};c[i]=e;var u=a(c,n,r);return u[i]},t}function ModelFormHandlers(e){function t(e){return e&&"Array"==e.constructor.name}function n(e,t){for(var n in e)if(e[n]==t)return!0;return!1}function r(e){return void 0===e||null===e||"boolean"==typeof e||""===String(e).trim()?!1:String(parseInt(e))===String(e)}function a(e){if(void 0===e||null===e||"boolean"==typeof e||""===String(e).trim())return!1;var t=String(e),n=t.split(".");if(t.indexOf(".")>-1&&2==n.length){var r=String(parseFloat(t).toFixed(n[1].length));return""!=n[0]&&r==t||""==n[0]&&r.replace("0.",".")==t}return!1}function o(e,t){return"integer"==t.attr("data-type")&&r(e)?parseInt(e):"number"==t.attr("data-type")&&a(e)?parseFloat(e):e}var e=e||"data-bind",i=i||{};return i.selector=function(t){return"["+e+'="'+t.join(".")+'"]'},i.initter=function(e,r,a,o){o.length&&void 0!==o.prop("value")&&o.change(function(t){o.hasClass("select2")?i.callback():e[r]=e[r].value}),t(a)&&o.length?"select-multiple"==o[0].type?o.val(a):$.each(o,function(e,t){this.checked=n(a,t.value)}):o.length&&("checkbox"==o[0].type?o[0].checked=Boolean(a):"radio"==o[0].type?$.each(o,function(e,t){this.checked=a==t.value}):"select"==o[0].type||"select-one"==o[0].type?o[0].selected=a==o.val():void 0!==o.prop("value")?o.val(a):o.text(a))},i.setter=function(e,t){t.length>1?$.each(t,function(r,a){"radio"==a.type?t[r].checked=a.value==e:"checkbox"==a.type?n(e,a.value)?$(this).prop("checked","checked"):$(this).removeAttr("checked"):void 0!==$(this).prop("value")?$(this).val(e):$(this).text(e)}):t.length&&("checkbox"==t[0].type?t[0].checked=Boolean(e):t.hasClass("select2")?t.val(e).trigger("change"):void 0!==t.prop("value")?t.val(e):t.text(e))},i.getter=function(e,t){if(t.length&&t[0].multiple){if("select-multiple"==t[0].type)return t.val()?t.val().map(function(e){return o(e,t)}):[];if("checkbox"==t[0].type)return t.filter(function(){return this.checked}).map(function(){return o($(this).attr("value"),t)}).get()}else{if(t.length&&"radio"==t[0].type)return o($(t).filter(function(){return this.checked}).val(),t);if(t.length)return"checkbox"==t[0].type?t[0].checked:void 0!==t.prop("value")?o(t.val(),t):o(t.text(),t)}},i.callback=function(){},i.handler={initter:function(e,t,n,r,a){return console.log(["init",e.value,t,n,r.join("."),a]),i.initter(t,n,e.value,$(i.selector(r))),e},getter:function(e,t){return e.value=i.getter(e.value,$(i.selector(t))),e},setter:function(e,t,n){return console.log(["setter",e.value,t.old_value,n.join(".")]),i.setter(e.value,$(i.selector(n))),i.callback(),e}},{formHandler:i.handler}}function ModelObserverHandlers(){function e(){return Date.now()}function t(e,t){for(n in t)"object"!=typeof e[n]?e[n]=t[n]:"object"==typeof t[n]&&(e[n]=realMerge(e[n],t[n]));return e}function r(e,n,r,a,o){var i=e[n],r=t({enumerable:!1,configurable:!1},r||{});r.get=a||function(){return i},r.set=o||function(e){i=e},Object.defineProperty(e,n,r)}function a(t){var n=t.value,r={enumerable:!1,configurable:!1};r.get=function(){return this.canget?n:void 0},r.set=function(t){this.canset&&(n=t,this.updated=e())},Object.defineProperty(t,"value",r)}function o(e){var t=(e.value,{enumerable:!1,configurable:!1});t.get=function(){var e={};if(this.canget)for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t].value);return e},t.set=function(e){if(this.canset){var t=this.path.slice();for(var n in e)t.push(n),this.hasOwnProperty(n)&&(this[n].value=e[n]),t.pop()}},Object.defineProperty(e,"value",t)}function i(e,t,n){var a=e[t]=n||!0,o=function(){return a},i=function(e){a=e;for(var n in this)this[n].hasOwnProperty(t)&&(this[n][t]=a)};r(e,t,{},o,i)}function c(e,t,n){Object.defineProperty(e,t,{value:e[t]||n,enumerable:!1,configurable:!1,writable:!1})}function u(e,t,n){var a=e[t]=n,o=function(){return a},i=function(e){a=e,this.parent&&(this.parent[t]=e)};r(e,t,null,o,i)}Date.now||(Date.now=function(){return(new Date).getTime()});var l={initter:function(t,n,l,f,s){null!==t&&"object"==typeof t?(n[l].value=t,o(n[l]),n[l].branch=!0,r(n[l],"branch")):(n[l]={value:t},a(n[l]),n[l].node=!0,r(n[l],"node"));var h,p;return h=f.length>1?f[f.length-2]:null,h&&(p=s[h]),n[l].parent=p,r(n[l],"parent"),n[l].path=f,r(n[l],"path"),n[l].old_value=t,r(n[l],"old_value"),i(n[l],"canget",n[l].canget),i(n[l],"canset",n[l].canset),c(n[l],"created",n[l].created||e()),u(n[l],"updated",n[l].updated),(null===t||"object"!=typeof t)&&(t=n[l]),t},getter:function(e,t){return e},setter:function(e,t,n){return t.old_value=t.value,t.value=e,t}};return{valueHandler:l}}var Interface=function(e){e=e||null;var t,n,r,a=function(e){return"undefined"==typeof e},o=function(e){return"function"!=typeof e},i=function(e,t){if(o(e))throw new Error('"signature" parameter should be of type "function"');if(o(t))throw new Error('"implementation" parameter should be of type "function"');return e.length!==t.length};switch(!0){case null===e:throw new Error("No arguments supplied to an instance of Interface constructor.");case a(e.type):throw new Error("Interface.type not defined.");case a(e.implementation):throw new Error("The interface ".concat(e.type).concat(" has not been implemented."))}t=e.type,n=e.implementation,r={};for(var c in e){var u=e[c];o(u)||(r[c]=u)}for(var u in r){if(a(n[u]))throw new Error(t.concat(".").concat(u).concat(" has not been implemented."));for(var c in n){var l=n[c];switch(!0){case a(r[c]):throw new Error(c.concat(" is not a defined member of ").concat(t).concat("."));case o(l):throw new Error(t.concat(".").concat(c).concat(" has not been implemented as a function."));case i(r[c],l):throw new Error("An implementation of ".concat(t).concat(".").concat(c).concat(" does not have the correct number of arguments."));default:r[c]=l}}}return r};