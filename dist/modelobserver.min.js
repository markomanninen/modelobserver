function BaseModelObserver(){var e={interfaces:{},create:function(e,n){this.interfaces[e]=n},implement:function(e,n){return this.interfaces[e].implementation=n,this.interfaces[e].type=e,new Interface(this.interfaces[e])}},n=n||{};return n.handlerApi=function(){var n="handlers",t={},r={};return e.create(n,{initter:function(e,n,t,r,a){return e},getter:function(e,n){return e},setter:function(e,n,t){return e}}),this.define=function(a){var o=e.implement(n,a);for(var i in a)a.hasOwnProperty(i)&&(t.hasOwnProperty(i)||(t[i]=[]),Object.defineProperty(r,i,{get:function(){return t[i]},set:function(e){t[i].push(e)},enumerable:!0,configurable:!0}),r[i]=o[i])},this.runHandler=function(e){for(var n in t[e])t[e].hasOwnProperty(n)&&(arguments[1][0]=t[e][n].apply(this,arguments[1]));return arguments[1][0]},this},n.handler=new n.handlerApi,n.createModel=function(e,t,r){function a(e,n,t){var n=n||[];for(var r in e)n.push(r),o(e[r],e,r,n.slice(),t),"object"==typeof e[r]&&a(e[r],n,e),n.pop();return e}function o(e,t,r,a,o){e=n.handler.runHandler("initter",[e,t,r,a,o]),Object.defineProperty(t,r,{configurable:!0,get:function(){return n.handler.runHandler.bind(this)("getter",[e,a])},set:function(t){e=n.handler.runHandler.bind(this)("setter",[t,e,a])}})}var i=i||"root",c={};c[i]=e;var u=a(c,t,r);return u[i]},n}function ModelObserverHandlers(e){function t(){return Date.now()}function r(e,t){for(n in t)"object"!=typeof e[n]?e[n]=t[n]:"object"==typeof t[n]&&(e[n]=realMerge(e[n],t[n]));return e}function a(e,n,t,a,o){var i=e[n],t=r({enumerable:!1,configurable:!1},t||{});t.get=a||function(){return i},t.set=o||function(e){i=e},Object.defineProperty(e,n,t)}function o(e){var n=e.value,r={enumerable:!1,configurable:!1};r.get=function(){return this.canget?n:void 0},r.set=function(e){this.canset&&(n=e,this.updated=t())},Object.defineProperty(e,"value",r)}function i(e){var n=(e.value,{enumerable:!1,configurable:!1});n.get=function(){var e={};if(this.canget)for(var n in this)this.hasOwnProperty(n)&&(e[n]=this[n].value);return e},n.set=function(e){if(this.canset){var n=this.path.slice();for(var t in e)n.push(t),this.hasOwnProperty(t)&&(this[t].value=e[t]),n.pop()}},Object.defineProperty(e,"value",n)}function c(e,n,t){var r=e[n]=t||!0,o=function(){return r},i=function(e){r=e;for(var t in this)this[t].hasOwnProperty(n)&&(this[t][n]=r)};a(e,n,{},o,i)}function u(e,n,t){Object.defineProperty(e,n,{value:e[n]||t,enumerable:!1,configurable:!1,writable:!1})}function f(e,n,t){var r=e[n]=t,o=function(){return r},i=function(e){r=e,this.parent&&(this.parent[n]=e)};a(e,n,null,o,i)}Date.now||(Date.now=function(){return(new Date).getTime()});var s={initter:function(e,n,r,s,l){null!==e&&"object"==typeof e?(n[r].value=e,i(n[r]),n[r].branch=!0,a(n[r],"branch")):(n[r]={value:e},o(n[r]),n[r].node=!0,a(n[r],"node"));var h,p;return h=s.length>1?s[s.length-2]:null,h&&(p=l[h]),n[r].parent=p,a(n[r],"parent"),n[r].path=s,a(n[r],"path"),c(n[r],"canget",n[r].canget),c(n[r],"canset",n[r].canset),u(n[r],"created",n[r].created||t()),f(n[r],"updated",n[r].updated),(null===e||"object"!=typeof e)&&(e=n[r]),e},getter:function(e,n){return e},setter:function(e,n,t){return n.value=e,n}};return{valueHandler:s}}var Interface=function(e){e=e||null;var n,t,r,a=function(e){return"undefined"==typeof e},o=function(e){return"function"!=typeof e},i=function(e,n){if(o(e))throw new Error('"signature" parameter should be of type "function"');if(o(n))throw new Error('"implementation" parameter should be of type "function"');return e.length!==n.length};switch(!0){case null===e:throw new Error("No arguments supplied to an instance of Interface constructor.");case a(e.type):throw new Error("Interface.type not defined.");case a(e.implementation):throw new Error("The interface ".concat(e.type).concat(" has not been implemented."))}n=e.type,t=e.implementation,r={};for(var c in e){var u=e[c];o(u)||(r[c]=u)}for(var u in r){if(a(t[u]))throw new Error(n.concat(".").concat(u).concat(" has not been implemented."));for(var c in t){var f=t[c];switch(!0){case a(r[c]):throw new Error(c.concat(" is not a defined member of ").concat(n).concat("."));case o(f):throw new Error(n.concat(".").concat(c).concat(" has not been implemented as a function."));case i(r[c],f):throw new Error("An implementation of ".concat(n).concat(".").concat(c).concat(" does not have the correct number of arguments."));default:r[c]=f}}}return r};